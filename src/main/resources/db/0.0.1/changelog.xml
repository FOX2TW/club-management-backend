<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <changeSet id="0.0.1-club" author="jun.li">
        <sql>
            create table t_club(
            `id` int unsigned not null primary key auto_increment,
            `name` varchar(100) not null,
            `type` int not null,
            `approve_status` tinyint(1) not null default 0,
            `introduction` varchar(2000),
            `delete_status` tinyint(1) not null default 0,
            `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
            `created_by` int unsigned not null,
            `updated_at` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
            `updated_by` int unsigned not null
            ) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="0.0.1-clubMember" author="jw.chen">
        <sql>
            create table t_club_member(
            `id` int unsigned not null primary key auto_increment,
            `user_id` int unsigned not null,
            `club_id` int unsigned not null,
            `manager_flag` tinyint(1) not null default 0,
            `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
            `created_by` int unsigned not null,
            `updated_at` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
            `updated_by` int unsigned not null
            ) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="0.0.1-add-fields-to-club" author="jun.li">
        <addColumn tableName="t_club">
            <column name="picture" type="VARCHAR(400)" afterColumn="introduction">
            <constraints nullable="true" />
        </column>
            <column name="address" type="VARCHAR(200)" afterColumn="picture">
                <constraints nullable="true" />
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="0.0.1-activity" author="jw.chen">
        <sql>
            create table t_activity(
                `id` int unsigned not null primary key auto_increment COMMENT '主键',
                `club_id` int unsigned not null COMMENT '俱乐部ID',
                `name` varchar(100) not null COMMENT '名称',
                `theme_picture` varchar(100) not null COMMENT '主题图片，通过文件路径指定',
                `start_time` timestamp DEFAULT CURRENT_TIMESTAMP COMMENT '活动起始时间',
                `end_time` timestamp COMMENT '活动结束时间',
                `join_end_time` timestamp COMMENT '报名截止时间',
                `number_limitation` int unsigned COMMENT '参与者数量上限',
                `description` varchar(2000) COMMENT '活动描述',
                `status` tinyint(2) not null DEFAULT 0 COMMENT '状态，0：活动未发布，1：活动已发布，2：活动已结束',
                `number_thumbs_up` int unsigned COMMENT '点赞数',
                `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
                `created_by` int unsigned not null,
                `updated_at` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                `updated_by` int unsigned not null
            ) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
    <changeSet id="0.0.1-activityParticipant" author="jw.chen">
        <sql>
            create table t_activity_participant(
                `id` int unsigned not null primary key auto_increment COMMENT '主键',
                `activity_id` int unsigned not null COMMENT '活动ID',
                `participant_id` int unsigned not null COMMENT '参与者ID',
                `role` tinyint(1) not null DEFAULT 0 COMMENT '角色，0：普通参与者，1：组织者',
                `created_at` timestamp DEFAULT CURRENT_TIMESTAMP,
                `created_by` int unsigned not null,
                `updated_at` timestamp DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
                `updated_by` int unsigned not null
            ) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;
        </sql>
    </changeSet>
</databaseChangeLog>